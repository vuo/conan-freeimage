diff -ur source/FreeImage/Makefile.osx source/FreeImage2/Makefile.osx
--- Makefile.osx	2020-11-02 14:54:20.000000000 -0500
+++ Makefile.osx	2020-11-02 14:54:33.000000000 -0500
@@ -4,29 +4,27 @@
 # This file can be generated by ./gensrclist.sh
 include Makefile.srcs
 
-# Find SDK path via xcode-select, backwards compatible with Xcode vers < 4.5
-MACOSX_SYSROOT = $(shell xcrun --show-sdk-path)
 # Specify deployement target here
-MACOSX_DEPLOYMENT_TARGET = 10.11
+MACOSX_DEPLOYMENT_TARGET = 10.12

 # General configuration variables:
-CC_I386 = $(shell xcrun -find clang)
-CC_X86_64 = $(shell xcrun -find clang)
-CPP_I386 = $(shell xcrun -find clang++)
-CPP_X86_64 = $(shell xcrun -find clang++)
+CC_ARM64 = $(CC)
+CC_X86_64 = $(CC)
+CPP_ARM64 = $(CXX)
+CPP_X86_64 = $(CXX)
 MACOSX_DEPLOY = -mmacosx-version-min=$(MACOSX_DEPLOYMENT_TARGET)
-COMPILERFLAGS = -Os -fexceptions -fvisibility=hidden -DNO_LCMS -D__ANSI__
-COMPILERFLAGS_I386 = -arch i386
+COMPILERFLAGS = -Oz -fexceptions -fvisibility=hidden -DNO_LCMS -D__ANSI__ -DDISABLE_PERF_MEASUREMENT
+COMPILERFLAGS_ARM64 = -arch arm64 -DPNG_ARM_NEON_OPT=0
 COMPILERFLAGS_X86_64 = -arch x86_64
 COMPILERPPFLAGS = -Wno-ctor-dtor-privacy -D__ANSI__ -std=c++11 -stdlib=libc++ -Wc++11-narrowing
 INCLUDE +=
-INCLUDE_I386 = -isysroot $(MACOSX_SYSROOT)
-INCLUDE_X86_64 = -isysroot $(MACOSX_SYSROOT)
-CFLAGS_I386 = $(COMPILERFLAGS) $(COMPILERFLAGS_I386) $(INCLUDE) $(INCLUDE_I386) $(MACOSX_DEPLOY)
+INCLUDE_ARM64 = -isysroot $(MACOSX_SYSROOT) -I../_build_libjpegturbo_arm
+INCLUDE_X86_64 = -isysroot $(MACOSX_SYSROOT) -I../_build_libjpegturbo_x86
+CFLAGS_ARM64 = $(COMPILERFLAGS) $(COMPILERFLAGS_ARM64) $(INCLUDE) $(INCLUDE_ARM64) $(MACOSX_DEPLOY)
 CFLAGS_X86_64 = $(COMPILERFLAGS) $(COMPILERFLAGS_X86_64) $(INCLUDE) $(INCLUDE_X86_64) $(MACOSX_DEPLOY)
-CPPFLAGS_I386 = $(COMPILERPPFLAGS) $(CFLAGS_I386)
+CPPFLAGS_ARM64 = $(COMPILERPPFLAGS) $(CFLAGS_ARM64)
 CPPFLAGS_X86_64 = $(COMPILERPPFLAGS) $(CFLAGS_X86_64)
-LIBRARIES_I386 = $(MACOSX_DEPLOY) -Wl,-syslibroot $(MACOSX_SYSROOT)
-LIBRARIES_X86_64 = $(MACOSX_DEPLOY) -Wl,-syslibroot $(MACOSX_SYSROOT)
+LIBRARIES_ARM64 = $(MACOSX_DEPLOY) ../_install_libjpegturbo_arm/libturbojpeg.a -Wl,-syslibroot $(MACOSX_SYSROOT)
+LIBRARIES_X86_64 = $(MACOSX_DEPLOY) ../_install_libjpegturbo_x86/libturbojpeg.a -Wl,-syslibroot $(MACOSX_SYSROOT)
 LIBTOOL = libtool
 LIPO = lipo
@@ -37,10 +35,10 @@
 LIBNAME = lib$(TARGET).$(VER_MAJOR).dylib
 HEADER = Source/FreeImage.h
 
-.SUFFIXES: .o-i386 .o-x86_64
-MODULES_I386 = $(SRCS:.c=.o-i386)
+.SUFFIXES: .o-arm64 .o-x86_64
+MODULES_ARM64 = $(SRCS:.c=.o-arm64)
 MODULES_X86_64 = $(SRCS:.c=.o-x86_64)
-MODULES_I386 := $(MODULES_I386:.cpp=.o-i386)
+MODULES_ARM64 := $(MODULES_ARM64:.cpp=.o-arm64)
 MODULES_X86_64 := $(MODULES_X86_64:.cpp=.o-x86_64)
 
 PREFIX = /usr/local
@@ -78,29 +76,29 @@
 
 # --- END
 
-$(STATICLIB)-i386: $(MODULES_I386)
-	$(LIBTOOL) -arch_only i386 -o $@ $(MODULES_I386)
+$(STATICLIB)-arm64: $(MODULES_ARM64)
+	$(LIBTOOL) -arch_only arm64 -o $@ $(MODULES_ARM64)
 
 $(STATICLIB)-x86_64: $(MODULES_X86_64)
 	$(LIBTOOL) -arch_only x86_64 -o $@ $(MODULES_X86_64)
 
-$(SHAREDLIB): $(SHAREDLIB)-i386 $(SHAREDLIB)-x86_64
-	$(LIPO) -create $(SHAREDLIB)-i386 $(SHAREDLIB)-x86_64 -output $(SHAREDLIB)
+$(SHAREDLIB): $(SHAREDLIB)-arm64 $(SHAREDLIB)-x86_64
+	$(LIPO) -create $(SHAREDLIB)-arm64 $(SHAREDLIB)-x86_64 -output $(SHAREDLIB)
 
-$(SHAREDLIB)-i386: $(MODULES_I386)
-	$(CPP_I386) -arch i386 -dynamiclib $(LIBRARIES_I386) -o $@ $(MODULES_I386)
+$(SHAREDLIB)-arm64: $(MODULES_ARM64)
+	$(CPP_ARM64) -arch arm64 -dynamiclib $(LIBRARIES_ARM64) -o $@ $(MODULES_ARM64)
 
 $(SHAREDLIB)-x86_64: $(MODULES_X86_64)
 	$(CPP_X86_64) -arch x86_64 -dynamiclib $(LIBRARIES_X86_64) -o $@ $(MODULES_X86_64)
 
-.c.o-i386:
-	$(CC_I386) $(CFLAGS_I386) -c $< -o $@
+.c.o-arm64:
+	$(CC_ARM64) $(CFLAGS_ARM64) -c $< -o $@
 
 .c.o-x86_64:
 	$(CC_X86_64) $(CFLAGS_X86_64) -c $< -o $@
 
-.cpp.o-i386:
-	$(CPP_I386) $(CPPFLAGS_I386) -c $< -o $@
+.cpp.o-arm64:
+	$(CPP_ARM64) $(CPPFLAGS_ARM64) -c $< -o $@
 
 .cpp.o-x86_64:
 	$(CPP_X86_64) $(CPPFLAGS_X86_64) -c $< -o $@
@@ -113,4 +111,4 @@
 	ln -sf $(SHAREDLIB) $(INSTALLDIR)/$(LIBNAME)
 
 clean:
-	rm -f core Dist/*.* u2dtmp* $(MODULES_I386) $(MODULES_X86_64) $(STATICLIB) $(STATICLIB)-i386 $(SHAREDLIB) $(SHAREDLIB)-i386 $(SHAREDLIB)-x86_64
+	rm -f core Dist/*.* u2dtmp* $(MODULES_ARM64) $(MODULES_X86_64) $(STATICLIB) $(STATICLIB)-arm64 $(SHAREDLIB) $(SHAREDLIB)-arm64 $(SHAREDLIB)-x86_64
